---
title: "[Operation System] 5. Thread"

tags:
    - Operation System

toc: true
toc_sticky: true

date: 2022-10-07
last_modified_at: 2022-12-12
---

## 쓰레드 (```Thread```) : 프로세스 내부의 흐름

- CPU를 구성하는 기본 단위로, 일반적으로 하나의 프로세스는 하나의 쓰레드가 존재
- 하나의 쓰레드는 고유한 ```Thread ID```, ```Program Counter```, ```Register Set``` 및 ```Stack```을 가짐

### 다중 쓰레드 (```Multi-Threads```) :  하나의 프로세스에 쓰레드가 2개 이상 존재
-  ```Concurrent``` : 한 프로세스에서 여러 쓰레드가 빠른 시간 간격으로 스위칭되어 동시에 실행되는 것처럼 보임
   - 여러 쓰레드들이 하나의 프로세스 안에 속하면서 ```code```, ```data``` 메모리 공간과 프로세스 자원 ```file```과 ```I/O``` 공유
   - 메시지 패싱 X (운영 체제를 거치지 않고도 통신 가능), 공유 메모리 X (공유 메모리를 만들지 않아도 됨)
     - 멀티 프로세스에 비해 문맥 전환 시간이 짧고, 메모리와 자원의 할당이 더 효율적
- 운영체제가 다중 쓰레드를 지원 : 현대 운영체제에서의 문맥 전환은 프로세스가 아닌 쓰레드 단위로 이루어짐
  - 하나의 프로세스 안에서 여러 쓰레드가 수행되다가 다른 프로세스로 넘어가 그 프로세스의 쓰레드를 수행함
    - 웹 브라우저 : 화면을 출력하는 쓰레드와 데이터를 읽어오는 쓰레드가 따로 수행

> 프로세스와 쓰레드의 비교 : 다중 프로세스와 다중 쓰레드는 둘다 여러 흐름이 동시에 진행된다는 공통점을 가지나,
>
> - 다중 프로세스에서 각 프로세스는 독립적으로 실행되며 각각 별개의 메모리를 차지한다.
> - 다중 쓰레드는 프로세스 내 메모리를 공유해 사용할 수 있다. 고로, 프로세스보다 스레드 간의 전환 속도가 빠르다.
> - 다중 쓰레드는 ```CPU```가 여러 개일 경우에 각 ```CPU```가 스레드 하나씩을 담당하는 방법으로 속도를 높일 수 있다.
> - 다중 쓰레드는 각각의 쓰레드 중 어떤 것이 먼저 실행될지 그 순서를 알 수 없어 '경쟁 조건'의 문제가 발생한다.

### 다중 쓰레드 모델 (```Multi-Threads Models```) :  2개 이상의 쓰레드로 구성된 모델
- 유저 쓰레드 (```User Thread```) : 유저 레벨의 쓰레드 라이브러리를 통해 관리되는 쓰레드
- 커널 쓰레드 (```Kernel Thread```) :  운영체제가 제공하고 직접 관리하는 쓰레드

#### ```Many-to-One``` 모델 : 한 커널 쓰레드가 여러 유저 쓰레드 처리
- 병목 현상 : 시스템 호출이 발생하면, 모든 유저 쓰레드가 대기해야 함

#### ```One-to-One``` 모델 : 유저 쓰레드 한 개당 커널 쓰레드를 대응시켜 처리
- 커널 쓰레드가 과도하게 생성되어 비효율적임

#### ```Many-to-Many``` 모델 : 여러 유저 쓰레드가 여러 커널 쓰레드 처리
- 커널 쓰레드의 수는 유저 쓰레드의 수보다 작거나 같게 해야 함

#### ```Two-Level``` 모델 : 중요한 작업은 ```One-to-One```으로, 나머지는 ```Many-to-One```으로 처리