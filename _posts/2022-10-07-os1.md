---
title: "[Operation System] 1. Operation System"

tags:
    - Operation System

toc: true
toc_sticky: true

date: 2022-10-07
last_modified_at: 2022-12-12
---

## 운영체제 (```Operation System```) : 사용자가 컴퓨터에서 실행한 프로그램을 관리하고 제어

- 컴퓨터 시스템 자원의 효율적인 관리 (```Performance```) : 하드웨어 자원을 각각의 사용자 응용 프로그램에 적절히 분배
  - 하드웨어 자원 (```Hardware Resource```) : CPU 시간, 기억 장치 및 디스크 영역, I/O 장치
- 사용자 편의성 제공 (```Convenience```) : 사용자가 더 편리하게 사용할 수 있는 환경을 구성

<div style="color: white; padding: 2% 0% 2% 0%; border: 4px solid #00CED1;">
    <ul>
        <li>프로세스 관리 (Process Management)</li>
        <li>메인 메모리 관리 (Main Memory Management)</li>
        <li>파일 관리(File Management)</li>
        <li>저장 장치 관리 (Storage Management)</li>
        <li>I/O 장치 관리 (I/O Device Management)</li>
        <li>시스템 호출 (System call)</li>
    </ul>
</div>


### 부팅 (```Booting```) : 컴퓨터를 시작할 때 자기 자신을 구동시킬 프로그램을 스스로 불러내는 동작
- 메인 메모리 (```Main Memory```) : 즉시 필요한 데이터를 저장하는 주 기억 장치
  - ```RAM``` : 휘발성 주 기억 장치 (전원이 꺼지면 모든 내용이 지워짐)
    - 코드 영역 (```Code Area```) : 실행할 프로그램의 코드가 저장되는 영역
      - CPU는 이 영역에 저장된 명령어를 하나씩 호출해 수행함
    - 데이터 영역 (```Data Area```) : 실행할 프로그램의 전역 변수와 정적 변수가 저장된 영역
      - 프로그램 시작 시 할당, 프로그램 종료 시 소멸
    - 스택 영역 (```Stack Area```) : 프로그램의 함수 호출과 관련된 지역 변수와 매개 변수가 정적으로 저장된 영역
      - 후입선출 (```Last-In, First-Out```) 방식에 따른 동작 : ```PUSH```로 데이터 저장, ```POP```로 데이터 인출 
      - 메모리의 높은 주소에서 메모리의 낮은 주소의 방향으로 할당 
      - 함수 호출 시 할당, 함수 호출 종료 시 소멸
    - 힙 영역 (```Heap Area```) : 사용자에 의해 동적으로 할당되고 해제되는 전역 변수가 저장되는 영역
      - 할당되는 변수의 크기 제한이 없음 : 크기 제한이 존재하는 스택에 비해 액세스 속도가 상대적으로 느림
      - CPU에 의해 효율적으로 관리되는 스택 영역과 달리, 사용자가 힙 영역을 관리해야 함
        - 메모리 단편화 (```Memory Fragmentation```) : 사용 가능한 메모리가 존재하나, 할당 불가능
      - 메모리의 낮은 주소에서 메모리의 높은 주소의 방향으로 할당
  - ```ROM``` : 비휘발성 주 기억 장치 (전원이 꺼져도 그 안의 내용이 계속 유지)
    - ```POST``` (```Power-On Self-Test```) : 부팅 시 가장 처음 실행, 현재 컴퓨터의 상태 검사
    - 부트 로더 (```Boot Loader```) : ```POST``` 다음에 실행, 보조 기억 장치의 운영체제를 탐색 후 ```RAM```에 할당
      - 보조 기억 장치에서 ```RAM```으로 할당된 운영체제는 컴퓨터 전원이 꺼질 때까지 상주 (```Resident```)
- ```SSD```/```HDD``` : 운영체제가 저장된 보조 기억 장치
  - 커널 (```Kernel```) : 운영체제가 수행하는 모든 작업이 저장
  - 명령어 해석기 (```Shell```) : 사용자가 요청하는 명령어를 해석해 커널에 요청하고 결과를 출력
    - 응용 프로그램 (```Application```) : 운영체제 위에서 수행되며, 운영체제가 지원하는 자원만을 사용 가능

### 일괄 처리 시스템 (```Batch Processing System```) : 프로그램 수행 과정의 자동화
- ```Resident Monitor``` : 프로세서에 할당하기 위해 (컴파일 -> 링크 -> 로딩)의 과정을 하나의 프로그램으로 작성

### 시분할 시스템 (```Time-sharing System```) : CPU가 프로그램을 수행하는 시간을 제한
- 스위칭 (```Switching```) : 프로그램이 일정 시간 실행되면 ```Time Out```을 발생시켜 다음 프로그램으로 넘어가게 함
- 다중 작업 (```Multitasking```) : CPU가 짧은 시간 내에 여러 프로그램을 스위칭해 동시에 작업하는 것처럼 보이게 함
  - CPU 스케줄링 (```CPU Scheduling```) : CPU가 어느 프로그램을 실행할지 선택하는 작업

### 다중 프로그래밍 (```Multiprogramming```) : 메모리에 여러 응용 프로그램을 적재해 idle 상태 최소화
- 프로그램 실행 시에 계산을 담당하는 ```CPU```와 입출력을 담당하는 ```I/O``` 장치가 교대로 실행
  - ```idle```상태 : I/O 장치가 실행되는 동안 CPU가 아무런 작업도 하지 않는 상태

### 인터럽트 기반 시스템 (```Interrupt-based System```) : 인터럽트 발생 시 ```ISR```에 맞는 처리 수행
- 인터럽트 (```Interrupt```) : 프로그램 실행 중에 예기치 않은 상황이 발생할 경우 이를 CPU에 알리는 전기 신호
  - 외부 인터럽트 (```Eternal Interrupt```) = 하드웨어 인터럽트 (```Hardware Interrupt```)
  - 내부 인터럽트 (```Internal Interrupt```) = 소프트웨어 언터럽트 (```Software Interrupt```)
    - 예외 (```Exception```)
    - 시스템 호출 (```System call```)
- 인터럽트 서비스 루틴 (```Interrupt Service Routine```) : 인터럽트 신호를 처리할 방법을 내포한 운영체제 내의 코드

### 이중 모드 (```Dual Mode Execution```) : 유저 (```User```) 모드와 커널 (```Kernel```) 모드를 나눔

> ! 문제 : 어떤 작업이 자원을 계속해서 점유하는 일과 같이 컴퓨터의 작업 효율을 저해하는 행위로부터 보호할 수단 필요

- CPU 내 레지스터 (```Register```)의 ```Mode-Bit```를 플래그 (```flag```)로 활용해 나타냄 (커낼 모드 : ```0```, 유저 모드 : ```1```)
- 각 명령어에 ```Mode-Bit```를 넣어 시스템 내의 ```Mode-Bit```와 같을 시에만 명령어 수행
- 특권 명령어 (```Privileged Instruction```) : 커널 모드에서만 내릴 수 있는 명령어
  - ```STOP```, ```HALT```, ```RESET```, ```SET_TIMER``` 등
  - 유저 모드에서는 특권 명령어를 내릴 수 없음 (내부 인터럽트를 발생해 해당 명령어를 요청한 프로그램을 강제 종료)
- 시스템 호출 (```System Call```) : ```Mode-Bit```를 바꾸는 행위 (```INT 80```)
  - 사용자가 하드웨어 자원에 접근할 때, 프로그램에서 시스템 호출을 발생시켜 운영체제에 위임해 커널 모드로 처리

> - 컴퓨터가 부팅되는 과정 : 커널 모드
> - 응용 프로그램이 실행되는 과정 : 커널 모드
> - 응용 프로그램이 실행되는 중일 때 : 유저 모드
> - 인터럽트가 발생한 후 처리하는 과정 : 커널 모드
> - 인터럽트를 처리한 후 : 유저 모드

#### 하드웨어 보호 (```H/W Protection```) : 잘못된 명령이나 접근에 보호하기 위해 운영체제에서 내부 인터럽트 발생

> ! 문제 : 정보들이 여러 I/O 장치를 통해 컴퓨터로 입출력되는 과정에서 장치 간 혹은 데이터 간의 혼선이 발생할 수 있음

##### 입출력 장치 보호 (```I/O Protection```) : ```in```, ```out```과 같은 입출력 명령을 특권 명령으로 지정해 운영체제를 통해 수행
- 입출력 수행 시에는 관리자 모드로 전환해 특권 명령을 내림
  - ```Privileged Instruction Violation``` : 사용자가 입출력 명령을 직접 내린 경우 프로그램을 강제 종료 

> ! 문제 : 다른 사용자나 운영체제에 할당된 메모리 영역에 접근해 정보나 프로그램을 해킹할 수 있음

##### 메모리 보호 (```Memory Protection```) : CPU와 메인 메모리 간 주소 버스에 ```Memory Management Unit``` 설치
- 두 개의 레지스터를 통해 해당 프로그램의 주소 범위를 저장
- 사용자에 할당된 메모리 영역을 벗어난 주소값을 가져오지 못하게 함
- ```Memory Management Unit``` 설정은 운영체제만 변경 가능
  - ```Segment Violation``` : 사용자에 할당된 메모리 영역을 벗어난 주소값이 ```MMU```에 오면 내부 인터럽트를 발생시킴

> ! 문제 : 프로그램에서의 무한 루프로 인해 CPU가 독점되어 다른 프로그램이 수행되지 못할 수 있음

##### CPU 보호 (```CPU Protection```) : 타이머 (```Timer```)를 두어 일정 시간이 지나면 타이머 인터럽트를 발생시킴
- 타이머 (```Timer```) : 무한 루프나 자원 독점을 막기 위해 특정 시간이 지나면 타이머 인터럽트를 발생시킴
  - 타이머 인터럽트 (```Timer Interrupt```) : 인터럽트의 ISR에서 CPU가 프로그램의 CPU 점유 시간을 측정해 분배
  - 운영체제는 타이머가 끝난 작업을 종료시키고 스케줄링 (```Scheduling```) 이전에 타이머 실행