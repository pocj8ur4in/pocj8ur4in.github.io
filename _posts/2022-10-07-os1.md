---
title: "[B/E] 1. 운영체제"

categories:
    - Backend

toc: true
toc_sticky: true

date: 2022-10-07
last_modified_at: 2022-10-08
---

<p class="notice--primary"><strong>이 항목은 현재 작성중입니다.</strong><br>> 아직 미완성된 코드나 문장 구조가 정확하지 않은 내용이 있을 수 있으니 유의하시기 바랍니다.</p>

<p class="notice--warning"><strong>이 항목은 검증되지 않은, 편향된, 혹은 잘못된 내용을 포함할 수 있습니다.</strong><br>> 작성자 역시 공부하는 학생이기에 해당 부분을 댓글이나 이메일을 통해 지적해주신다면 정말 감사할 것 같습니다.</p>

## 운영체제 (```Operation System```) : 사용자가 컴퓨터에서 실행한 프로그램을 관리하고 제어
- 컴퓨터 시스템 자원의 효율적인 관리 (```Performance```) : CPU, RAM 등 하드웨어 (```H/W```)를 관리해 성능 향상
- 사용자 편의성 제공 (```Convenience```) : 사용자가 더 편리하게 사용할 수 있는 환경을 구성

### ex) 부팅 (```Booting```) : 컴퓨터를 시작할 때 자기 자신을 구동시킬 프로그램을 스스로 불러내는 동작

- 메인 메모리 (```Main Memory```) : 즉시 필요한 데이터를 저장하는 주 기억 장치
  - ```RAM``` : 휘발성 주 기억 장치 (전원이 꺼지면 모든 내용이 지워짐)
  - ```ROM``` : 비휘발성 주 기억 장치 (전원이 꺼져도 그 안의 내용이 계속 유지)
    - ```POST``` (```Power-On Self-Test```) : (부팅 시 가장 처음 실행되는 프로그램) 현재 컴퓨터의 상태 검사
    - 부트 로더 (```Boot Loader```) : (```POST``` 다음에 실행되는 프로그램) 보조 기억 장치의 운영체제를 탐색 후 ```RAM```에 할당
      - 보조 기억 장치에서 ```RAM```으로 할당된 운영체제는 컴퓨터 전원이 꺼질 때까지 상주 (```Resident```)
- ```SSD```/```HDD``` : 운영체제가 저장된 보조 기억 장치
  - 커널 (```Kernel```) : 운영체제가 수행하는 모든 작업이 저장
  - 명령어 해석기 (```Shell```) : 사용자가 요청하는 명령어를 해석해 커널에 요청하고 결과를 출력
    - 응용 프로그램 (```Application```) : 운영체제 위에서 수행되며, 운영체제가 지원하는 자원만을 사용 가능

## 운영체제의 발전 과정

### 1. 일괄 처리 시스템 (```Batch Processing System```) : 프로그램 수행 과정의 자동화
- 컴파일 -> 링크 -> 로딩의 순서로 입력
- ```Resident Monitor``` : 프로세서에 할당하기 위해 위의 과정을 하나의 프로그램으로 작성 (최초의 운영체제)

### 2. 다중 프로그래밍 (```Multiprogramming System```) : 메모리에 여러 응용 프로그램을 적재시켜 idle 상태를 최소화
- 프로그램 실행 시에 계산을 담당하는 ```CPU```와 입출력을 담당하는 ```I/O``` 장치가 교대로 실행
  - ```idle```상태 : I/O 장치가 실행되는 동안 CPU가 아무런 작업도 하지 않는 상태
- CPU 스케줄링 (```CPU Scheduling```) : CPU가 어느 프로그램을 실행할지 선택하는 작업

### 3. 시분할 시스템 (```Time-sharing System```) : CPU가 프로그램을 수행하는 시간을 제한
- I/O 장치의 도입으로 사용자와 컴퓨터 간 대화 형식이 가능해졌으나, 컴퓨터의 가격이 비쌈 
  - 각 사용자들이 하나의 컴퓨터에 여러 I/O 장치를 연결하는, 단말기 (```Terminal```)의 형태로 공유하여 사용
  - 한 사용자가 CPU를 사용하는 동안 다른 사용자들이 사용하지 못하는 문제 발생
- 스위칭 (```Switching```) : 위의 문제를 해결하기 위해 프로그램을 일정 시간 실행하면 반드시 다음 프로그램으로 넘어가게 함

### 4. 인터럽트 기반 시스템 (```Interrupt-based System```) : 인터럽트 발생 시 ```ISR```에 맞는 처리를 수행
- 인터럽트 (```Interrupt```) : 프로그램 실행 중에 예기치 않은 상황이 발생할 경우 이를 CPU에 알리는 전기 신호
  - 외부 인터럽트 (```eternal Interrupt```)
  - 내부 인터럽트 (```internal Interrupt```)
- 인터럽트 서비스 루틴 (```Interrupt Service Routine```) : 운영체제 내에 있는, 인터럽트 신호를 처리하기 위한 방법을 내포한 코드

## 이중 모드 (Dual Mode) : 사용자 (```User```) 모드와 관리자 (```Supervisor```) 모드를 나눔

> 문제 : 여러 사용자가 한 컴퓨터를 서버로 활용할 때, 한 사용자가 고의나 실수로 서버에 치명적 손상을 주면 아무도 사용할 수 없다.

- CPU 내의 레지스터 (```Register```)의 비트 (```bit```)를 통해 플래그 (```flag```)로 나타냄 (관리자 모드 : ```0```, 사용자 모드 : ```1```)
- 특권 명령어 (```Privileged Instruction```) : 관리자 모드에서만 내릴 수 있는 명령어
  - ```STOP```, ```HALT```, ```RESET```, ```SET_TIMER``` 등
  - 사용자 모드에서는 특권 명령어를 내릴 수 없음 (내부 인터럽트를 발생해 해당 명령어를 요청한 프로그램을 강제 종료)
- 사용자가 하드웨어의 자원에 접근하는 경우, 프로그램에서 소프트웨어 인터럽트를 발생시켜 운영체제에 위임해 관리자 모드로 처리
  - 컴퓨터가 부팅되는 과정 : 관리자 모드
  - 응용 프로그램이 실행되는 과정 : 관리자 모드
  - 응용 프로그램이 실행되는 중일 때 : 사용자 모드
  - 인터럽트가 발생한 후 처리하는 과정 : 관리자 모드
  - 인터럽트를 처리하였을 때 : 사용자 모드

## 하드웨어 보호 (```Protection```) : 잘못된 명령이나 접근으로부터 보호하기 위해 운영체제에서 트랩을 일으킴

> 문제 : 정보들이 여러 I/O 장치를 통해 컴퓨터로 입출력되는 과정에서 장치 간 혹은 데이터 간의 혼선이 발생할 수 있다.

### > 입출력 장치 보호 : ```in```, ```out```과 같은 입출력 명령을 특권 명령으로 지정해 운영체제를 통해 수행되게 함
- 입출력 수행 시에는 관리자 모드로 전환해 특권 명령을 내림
  - ```Privileged Instruction Violation``` : 사용자가 입출력 명령을 직접 내린 경우 프로그램을 강제 종료 

> 문제 : 다른 사용자나 운영체제에 할당된 메모리 영역에 접근해 정보나 프로그램을 해킹할 수 있다.

### > 메모리 보호 : CPU와 메인 메모리 간의 주소 버스에 ```MMU``` (```Memory Management Unit```)을 설치
- 두 개의 레지스터를 통해 해당 프로그램의 주소 범위를 저장
- 사용자에 할당된 메모리 영역을 벗어난 주소값을 가져오지 못하게 함
- ```MMU``` 설정은 운영체제만 변경 가능
  - ```Segment Violation``` : 만약 사용자에 할당된 메모리 영역을 벗어난 주소값이 ```MMU```에 들어오면 내부 인터럽트를 발생시킴

> 문제 : 프로그램에서의 무한 루프로 인해 CPU가 독점되어 다른 프로그램이 수행되지 못할 수 있다.

### > CPU 보호 : 타이머 (```Timer```)를 두어 일정 시간이 지나면 타이머 인터럽트를 발생시킴
- 타이머 인터럽트 (```Timer Interrupt```) : 해당 인터럽트의 ISR에서 CPU는 각 프로그램의 CPU 점유 시간을 측정해 분배